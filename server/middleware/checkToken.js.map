{"version":3,"sources":["../../../server/middleware/checkToken.js"],"names":["jwt","require","module","exports","req","res","next","token","header","split","decoded","decode","exp","Date","now","json","code","message"],"mappings":";;AAAA;;;AAGA,IAAMA,MAAMC,QAAQ,cAAR,CAAZ;AACAC,OAAOC,OAAP,GAAiB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACzC,MAAIC,QAAQH,IAAII,MAAJ,CAAW,eAAX,EAA4BC,KAA5B,CAAkC,GAAlC,EAAuC,CAAvC,CAAZ;AACA,MAAIC,UAAUV,IAAIW,MAAJ,CAAWJ,KAAX,EAAkB,QAAlB,CAAd;AACA,MAAIA,SAASG,QAAQE,GAAR,IAAeC,KAAKC,GAAL,KAAa,IAAzC,EAA+C;AAC7C,WAAOT,IAAIU,IAAJ,CAAS;AACdC,YAAM,GADQ;AAEdC,eAAS;AAFK,KAAT,CAAP;AAID;AACDX;AACD,CAVD","file":"checkToken.js","sourcesContent":["/**\n *Created by admin on 2018/1/15\n */\nconst jwt = require('jsonwebtoken')\nmodule.exports = function (req, res, next) {\n  let token = req.header['authorization'].split(' ')[1]\n  let decoded = jwt.decode(token, 'secret')\n  if (token && decoded.exp <= Date.now() / 1000) {\n    return res.json({\n      code: 401,\n      message: 'token过期，请重新登录'\n    })\n  }\n  next()\n}\n"]}