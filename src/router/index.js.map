{"version":3,"sources":["../../../src/router/index.js"],"names":["Index","Login","LoginType","Register","PopularMovie","SongList","SongPlay","Recommend","AllSongList","Ranking","UserInfo","MyMusic","Social","About","SettingUp","Timing","Message","Vip","Store","Skin","MyDynamic","Attention","Fans","use","router","routes","path","name","component","meta","requireAuth","hidden","history","window","sessionStorage","clear","historyCount","getItem","setItem","isPush","endTime","Date","now","beforeEach","to","from","next","toIndex","fromIndex","parseInt","dispatch","test","url","split","location","href","token","localStorage","query","redirect","fullPath"],"mappings":"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","file":"index.js","sourcesContent":["import Vue from 'vue'\nimport Router from 'vue-router'\nimport store from '../store/index'\n\nconst Index = () => import('@/page/Index')\nconst Login = () => import('@/page/Login')\nconst LoginType = () => import('@/page/LoginType')\nconst Register = () => import('@/page/Register')\nconst PopularMovie = () => import('@/page/PopularMovie')\nconst SongList = () => import('@/page/SongListDetail')\nconst SongPlay = () => import('@/page/SongPlay')\nconst Recommend = () => import('@/page/Recommend')\nconst AllSongList = () => import('@/page/AllSongList')\nconst Ranking = () => import('@/page/Ranking')\nconst UserInfo = () => import('@/page/UserInfo')\nconst MyMusic = () => import('@/page/MyMusic')\nconst Social = () => import('@/page/SocialExt')\nconst About = () => import('@/page/About')\nconst SettingUp = () => import('@/page/SettingUp')\nconst Timing = () => import('@/page/Timing')\nconst Message = () => import('@/page/Message')\nconst Vip = () => import('@/page/Vip')\nconst Store = () => import('@/page/Store')\nconst Skin = () => import('@/page/Skin')\nconst MyDynamic = () => import('@/page/MyDynamic')\nconst Attention = () => import('@/page/Attention')\nconst Fans = () => import('@/page/Fans')\n\nVue.use(Router)\n\nconst router = new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Index',\n      component: Index\n      // meta: {\n      //   requireAuth: true\n      // }\n    },\n    {\n      path: '/popular',\n      name: 'popularMovie',\n      component: PopularMovie,\n      meta: {\n        requireAuth: true\n      }\n    },\n    {\n      path: '/songlist',\n      name: 'songList',\n      component: SongList\n    },\n    {\n      path: '/songplay',\n      name: 'songplay',\n      component: SongPlay\n    },\n    {\n      path: '/recommend',\n      name: 'recommend',\n      component: Recommend\n    },\n    {\n      path: '/info',\n      name: 'info',\n      component: UserInfo\n    },\n    {\n      path: '/mymusic',\n      name: 'mymusic',\n      component: MyMusic\n    },\n    {\n      path: '/social',\n      name: 'social',\n      component: Social\n    },\n    {\n      path: '/about',\n      name: 'about',\n      component: About\n    },\n    {\n      path: '/set',\n      name: 'set',\n      component: SettingUp\n    },\n    {\n      path: '/timing',\n      name: 'timing',\n      component: Timing\n    },\n    {\n      path: '/message',\n      name: 'message',\n      component: Message\n    },\n    {\n      path: '/vip',\n      name: 'vip',\n      component: Vip\n    },\n    {\n      path: '/store',\n      name: 'store',\n      component: Store\n    },\n    {\n      path: '/skin',\n      name: 'skin',\n      component: Skin\n    },\n    {\n      path: '/dynamic',\n      name: 'dynamic',\n      component: MyDynamic\n    },\n    {\n      path: '/attention',\n      name: 'attention',\n      component: Attention\n    },\n    {\n      path: '/fans',\n      name: 'fans',\n      component: Fans\n    },\n    {\n      path: '/allsonglist',\n      name: 'allsonglist',\n      component: AllSongList\n    },\n    {\n      path: '/ranking',\n      name: 'ranking',\n      component: Ranking\n    },\n    {\n      path: '/login',\n      name: 'login',\n      component: Login\n    },\n    {\n      path: '/logintype',\n      name: 'logintype',\n      component: LoginType\n    },\n    {\n      path: '/register',\n      name: 'register',\n      component: Register\n    },\n    {\n      path: '*',\n      component: Login,\n      hidden: true\n    }\n  ]\n})\n\nconst history = window.sessionStorage\nhistory.clear()\nlet historyCount = history.getItem('count') * 1 || 0\nhistory.setItem('/', 0)\nlet isPush = false\nlet endTime = Date.now()\n// let methods = ['push', 'go', 'replace', 'forward', 'back']\n\nrouter.beforeEach((to, from, next) => {\n  const toIndex = history.getItem(to.path)\n  const fromIndex = history.getItem(from.path)\n\n  if (toIndex) {\n    if (!fromIndex || parseInt(toIndex, 10) > parseInt(fromIndex, 10) || (toIndex === '0' && fromIndex === '0')) {\n      store.dispatch('updateDirection', 'forward')\n    } else {\n      // 判断是否是ios左滑返回\n      if (!isPush && (Date.now() - endTime) < 377) {\n        store.dispatch('updateDirection', '')\n      } else {\n        store.dispatch('updateDirection', 'reverse')\n      }\n    }\n  } else {\n    ++historyCount\n    history.setItem('count', historyCount)\n    to.path !== '/' && history.setItem(to.path, historyCount)\n    store.dispatch('updateDirection', 'forward')\n  }\n\n  if (/\\/http/.test(to.path)) {\n    let url = to.path.split('http')[1]\n    window.location.href = `http${url}`\n  } else {\n    next()\n  }\n\n  let token = localStorage.getItem('token')\n  if (to.meta.requireAuth) {\n    if (token) {\n      next()\n    } else {\n      next({\n        path: '/login',\n        query: {redirect: to.fullPath}\n      })\n    }\n  } else {\n    next()\n  }\n})\n\nexport default router\n"]}